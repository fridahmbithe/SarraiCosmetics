(()=>{var e=Object.defineProperty,t=(t,a)=>{for(var n in a)e(t,n,{get:a[n],enumerable:!0})},{withSelect:a,withDispatch:n}=wp.data,s="getgenie",i={sidebar:a((e=>({sidebar:e(s).sidebar()}))),contextMenu:a((e=>({contextMenu:e(s).contextMenu()}))),userHistoryData:a((e=>({userHistoryData:e(s).userHistoryData()}))),templates:a((e=>({templates:e(s).templates()}))),setTemplates:n((e=>({setTemplates(t){e(s).setTemplates(t)}}))),limitUsage:a((e=>({limitUsage:e(s).limitUsage()}))),setLimitUsage:n((e=>({setLimitUsage(t){e(s).setLimitUsage(t)}}))),setSidebar:n((e=>({setSidebar(t){e(s).setSidebar(t)}}))),setContextMenu:n((e=>({setContextMenu(t){e(s).setContextMenu(t)}}))),setUserHistoryData:n((e=>({setUserHistoryData(t){e(s).setUserHistoryData(t)}}))),setCurrentTemplate:n((e=>({setCurrentTemplate(t){e(s).setCurrentTemplate(t)}}))),currentTemplate:a((e=>({currentTemplate:e(s).getCurrentTemplate()}))),getTemplateInputs:a((e=>({getTemplateInputs:e(s).getTemplateInputs()}))),getInputs:a((e=>({getInputs:e(s).getInputs()}))),setInput:n((e=>({setInput(t,a){e(s).setInput(t,a)}}))),resetSidebar:n((e=>({resetSidebar(t,a){e(s).resetSidebar()}}))),resetTemplateInputs:n((e=>({resetTemplateInputs(t){e(s).resetTemplateInputs(t)}})))},{compose:r}=wp.compose,{createReduxStore:o,register:l}=wp.data,u={inputs:{},sidebar:{isUsageModalOpen:!1,currentPostContent:"",statisticsScreen:{triggered:!1,loading:!1},statisticsData:"",currentTemplate:"",currentWritingMode:"template",analyzedContent:{},toolbarWriting:!1,globalTemplateMode:!1,component:"",open:!1,analyzeKeyword:{open:!1},analyzingSearchVolume:!1,analyzingRelatedKeyword:!1,generatedOutlines:{open:!1,loading:!1},insertTextCallback:()=>"",insertTextField:null,existingInputValue:"",imageUrl:`${window.getGenie.config.assetsUrl}dist/admin/images`,rootContainer:document.getElementById("getgenie-container")||"",currentLanguage:JSON.parse(localStorage.getItem("getgenie-language"))||"en",requestId:"",languages:[],toneOfVoice:[],currentToneOfVoice:JSON.parse(localStorage.getItem("getgenie-toneOfVoice"))||"Standard",subscriptionStatistics:{},traceCodeMsg:""},templates:{list:Object.values(window.getGenie.config?.templateAssets?.templateList||{})},contextMenu:{open:!1,buttonEvent:{},contextMenuCallback:{},insertionField:"",inputContent:{beforeCaret:"",selectedText:"",afterCaret:""},selectedText:"",previousContent:""},userHistoryData:{allHistory:[],currentHistoryData:{},isCallable:!0},limitUsage:{usagePercentage:{},subscriptionUsagesLimit:{},siteUsagesLimit:{}}};l(o("getgenie",{reducer(e=u,t){switch(t.type){case"SET_SIDEBAR":return{...e,sidebar:{...e.sidebar,...t.value}};case"SET_CONTEXT_MENU":return{...e,contextMenu:{...e.contextMenu,...t.value}};case"SET_USER_HISTORY_DATA":return{...e,userHistoryData:{...e.userHistoryData,...t.value}};case"SET_CURRENT_TEMPLATE":return{...e,currentTemplate:t.value};case"SET_INPUT":return{...e,inputs:{...e.inputs,[e.sidebar.currentTemplate]:{...e.inputs[e.sidebar.currentTemplate]||{},[t.name]:t.value}}};case"SET_TEMPLATES":return{...e,templates:{...e.templates,...t.value}};case"SET_LIMIT_USAGE":return{...e,limitUsage:{...e.limitUsage,...t.value}};case"RESET_SIDEBAR":return{...e,sidebar:u.sidebar};case"RESET_TEMPLATE_INPUTS":let a={...e.inputs};return delete a[t.value],{...e,inputs:a}}return e},actions:{setSidebar:e=>({type:"SET_SIDEBAR",value:e}),setContextMenu:e=>({type:"SET_CONTEXT_MENU",value:e}),setUserHistoryData:e=>({type:"SET_USER_HISTORY_DATA",value:e}),setCurrentTemplate:e=>({type:"SET_CURRENT_TEMPLATE",value:e}),setInput:(e,t)=>({type:"SET_INPUT",name:e,value:t}),setTemplates:e=>({type:"SET_TEMPLATES",value:e}),setLimitUsage:e=>({type:"SET_LIMIT_USAGE",value:e}),resetSidebar:e=>({type:"RESET_SIDEBAR",value:e}),resetTemplateInputs:e=>({type:"RESET_TEMPLATE_INPUTS",value:e})},selectors:{sidebar:e=>e.sidebar,contextMenu:e=>e.contextMenu,userHistoryData:e=>e.userHistoryData,getCurrentTemplate:e=>e.currentTemplate,getInputs:e=>e.inputs[e.sidebar.currentTemplate]||{},getTemplateInputs:e=>e.inputs,templates:e=>e.templates,limitUsage:e=>e.limitUsage}}));var c={};t(c,{EndPoints:()=>p,HandleFetch:()=>P,HandleResponse:()=>N});var p={};t(p,{competitorData:()=>v,contentFeedback:()=>A,continueWriting:()=>_,countryList:()=>g,createHistoryUrl:()=>y,expandOutline:()=>f,genieMode:()=>M,getLicenseToken:()=>x,historyData:()=>S,keywordsData:()=>I,limitUsage:()=>R,outlines:()=>C,removeLicenseToken:()=>L,storeApiUrl:()=>D,updateUsageUrl:()=>E,userList:()=>d,writeIntro:()=>U,writeTemplates:()=>b,writeTitle:()=>h});var d="https://raw.githubusercontent.com/xs-salekin/data-store/main/user_list.json",g="https://raw.githubusercontent.com/xs-salekin/data-store/main/countries.json",m=window.getGenie.config,T=m.parserApi,w=m.licenseApi,S=m.historyApi+"list",y=m.historyApi+"create",E=m.baseApi+"user_usage_log",b=T+"writer-default/generate-templates-content",U=T+"writer-wizard/generate-intro",h=T+"writer-wizard/generate-title",C=T+"writer-wizard/generate-outline",I=T+"writer-wizard/keyword-doctor",v=T+"writer-wizard/serp-data",_=T+"advanced-writing/continue-writing",f=T+"advanced-writing/outline-expand",M=T+"advanced-writing/genie-mode",A=m.feedbackApi,D=m.storeApi+window.getGenie.blogWizardData?.post_id,x=w+"get-token",L=w+"remove-token",R=m.usageLimitStatsApi,{notification:k}=window.antd,O=(e,t,a="",n="top")=>{const s=wp.data.select("getgenie").sidebar();k[e]({message:t,description:a,placement:n,getContainer:()=>s.rootContainer,duration:5})},{Modal:H}=window.antd,N=(e,t)=>{const a=wp.data.select("getgenie").sidebar(),n=e?.message||[];e?.traceCode;e?.networkErr?O("error","Something went wrong!",n.join(" "),"topRight"):"success"===e?.status?(wp.data.dispatch("getgenie").setSidebar({requestId:e?.requestId}),e?.statistics&&wp.data.dispatch("getgenie").setLimitUsage({...e?.statistics}),t()):!window.getGenie.config?.siteToken||n.join("").toLowerCase().includes("access denied")?(wp.data.dispatch("getgenie").setSidebar({open:!1}),H.error({title:"Failed!",content:n.join(" "),className:"getgenie-confirm-modal",getContainer:()=>a.rootContainer})):O("error","Failed!",n.join(" "),"topRight")},P=(e,t,a,n="")=>{let s=p[t];n&&(s+=n),(async(e,t,a={})=>{const{config:n}=window.getGenie;if(!n?.authToken||"access_denied"===n?.authToken)return void t({message:["Access Denied!"]});let s={method:"POST",headers:{"Content-type":"application/json; charset=UTF-8","Site-Token":n?.siteToken||"","Auth-Token":n?.authToken||"","X-WP-Nonce":n?.restNonce||""}};const i=wp.data.select("getgenie").getInputs(),{numberOfResult:r,creativity:o,selectedLanguage:l,selectedTone:u}=i,c={...a,...a?.input,selectedLanguage:l,numberOfResult:r,resultCount:r,creativity:o,selectedTone:u};a&&"object"==typeof a&&(s.body=JSON.stringify(c));const p=await fetch(e,s)["catch"]((e=>t({networkErr:!0,message:[e?.message]})));if(p)if(p.ok)try{const s=await p.json();if(t(s),"success"===s?.status&&a?.input&&Object.values(a?.input||{}).length>0){let t=c;t.output=s?.data,t.limitUsageStats=wp.data.select("getgenie").limitUsage(),e.includes("writer-wizard")?t.templateType="writer-wizard":e.includes("writer-default")?t.templateType="writer-default":e.includes("advanced-writing")&&(t.templateType="advanced-writing"),t?.templateType&&(fetch(y,{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8","X-WP-Nonce":n?.restNonce||""}}),wp.data.dispatch("getgenie").setUserHistoryData({isCallable:!0}))}}catch(d){t({}),console.log("Something went wrong.",d)}else{const e=await p.text();t({networkErr:!0,error:e})}})(s,(t=>{e(t)}),a)};window.getGenie.Components={Common:{ReduxManager:{ComposeComponents:(e,t=[])=>{if(!t.length)return e;let a=[];return t.forEach((e=>{let t=i[e];t&&a.push(t)})),r(a)(e)}},RequestManager:c}}})();